# 计算机图形学应用程序

## 项目简介

这是一个基于MFC和OpenGL的计算机图形学应用程序，实现了各种2D/3D图形渲染和交互功能。项目整合了多种计算机图形学算法和技术，主要用于计算机图形学教学和实验。

## 系统环境

- 操作系统：Windows 10及以上
- 开发工具：Visual Studio（支持MFC）
- 依赖库：OpenGL、GLFW

## 项目结构

项目采用MFC文档/视图架构，主要组件包括：

- **主框架**：`CMainFrame` - 实现应用程序的主窗口框架和分割窗口
- **文档类**：`CCG2022111073冯杰Doc` - 管理场景数据和渲染操作
- **视图类**：
  - `CCG2022111073冯杰View` - 主渲染视图，集成了OpenGL渲染环境
  - `CCGSceneGraphView` - 场景图视图，用于场景层次结构的显示和管理

### 核心模块

- **渲染上下文**：`CCGRenderContext` - 封装OpenGL渲染功能
- **场景管理**：`CGScene` - 管理渲染场景和相机
- **几何对象**：
  - `CGNode` - 场景节点基类
  - `CGGroup` - 组合节点
  - `CGGeode` - 几何节点
  - `CGGeometry` - 几何图元基类
  - `CGLineSegment` - 线段
  - `CGPolylineSegment` - 折线段

- **交互处理**：`UIEventHandler` - 处理用户输入事件

## 功能特性

### 基础图形绘制

- 点、线、面的绘制
- 基本几何形状（圆、多边形等）

### 图形算法实现

- 直线绘制算法：
  - DDA算法
  - 中点算法（Midpoint）
  - Bresenham算法
- 圆绘制算法：
  - 中点圆算法
  - Bresenham圆算法
- 填充算法：
  - 扫描线填充算法
  - 种子填充算法

### 用户交互

- 鼠标交互绘制直线、多边形
- 状态栏显示坐标和提示信息
- 视图窗口缩放和调整

## 使用方法

1. **启动应用程序**：运行可执行文件`CG2022111073冯杰.exe`
2. **绘制图形**：
   - 在菜单或工具栏中选择绘制工具
   - 在视图窗口中点击和拖动鼠标进行绘制
3. **查看场景结构**：在左侧场景图视图中可以查看当前场景的节点结构
4. **交互操作**：
   - 使用鼠标左键选择和绘制
   - 使用鼠标右键显示上下文菜单
   - 状态栏显示当前坐标和操作提示

## 开发说明

### 扩展新功能

要添加新的绘图功能，请遵循以下步骤：

1. 创建新的几何图元类，继承自`CGGeometry`
2. 实现绘制算法和交互处理
3. 在UI中添加对应的命令和菜单项
4. 在文档类中处理新命令

### 编译构建

1. 使用Visual Studio打开解决方案文件`CG2022111073冯杰.sln`
2. 确保已安装MFC开发环境
3. 构建解决方案（推荐x64平台）

## 注意事项

- 应用程序依赖OpenGL和GLFW库，确保系统中已正确安装
- 部分高级功能可能需要支持OpenGL 3.3及以上版本的显卡
- 使用中如遇到渲染问题，请检查图形驱动程序是否最新

## 致谢

- OpenGL社区
- GLFW项目
- Microsoft MFC框架

## 详细操作说明

### 基本操作流程

1. **选择对象**
   - 在左侧场景树视图中点击要操作的节点（如线段、折线等）
   - 选中的节点会在主视图中高亮显示

2. **平移操作**
   - 选择对象后，使用工具栏或菜单中的平移按钮：
     - `左移`：对象向左移动10个单位
     - `右移`：对象向右移动10个单位
     - `上移`：对象向上移动10个单位
     - `下移`：对象向下移动10个单位
   - 每次点击按钮，对象会向对应方向移动固定距离

3. **旋转操作**
   - 选择对象后，使用工具栏或菜单中的旋转按钮：
     - `顺时针旋转`：对象绕中心点顺时针旋转
     - `逆时针旋转`：对象绕中心点逆时针旋转
   - 设置旋转中心点：
     - 按住`Shift`键，同时点击鼠标左键选择旋转中心
     - 状态栏会显示旋转中心的坐标
   - 使用鼠标右键拖动实现交互式旋转：
     - 按住右键拖动鼠标，对象会跟随鼠标移动方向旋转
     - 旋转角度根据鼠标移动距离计算

4. **缩放操作**
   - 选择对象后，使用工具栏或菜单中的缩放按钮：
     - `X轴缩放`：仅在X轴方向缩放
     - `Y轴缩放`：仅在Y轴方向缩放
     - `XY轴缩放`：同时在X和Y轴方向缩放
   - 使用鼠标滚轮进行交互式缩放：
     - 按住`Ctrl`键，滚动鼠标滚轮
     - 向上滚动：放大（1.1倍）
     - 向下滚动：缩小（0.9倍）
   - 缩放中心点：
     - 默认使用对象中心点
     - 按住`Shift`键，同时点击鼠标左键选择缩放中心

### 操作提示

- 所有变换操作都需要先选择对象
- 状态栏会实时显示操作提示和坐标信息
- 如果操作无效，请检查是否已正确选择对象
- 可以通过场景树视图查看对象的层次结构
- 变换操作会实时更新到场景中

### 注意事项

- 确保在操作前已选择正确的对象
- 旋转和缩放操作建议先设置合适的中心点
- 如果对象没有响应操作，请检查场景树中的选择状态
- 复杂的变换操作建议分步进行 